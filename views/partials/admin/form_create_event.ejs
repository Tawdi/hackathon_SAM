<script src="/js/formCreate.js"></script>
<form class="needs-validation" method="post" action="<%= event ? '/event_update_' + event.id : '/create_event' %>" enctype="multipart/form-data" novalidate>
    <!-- Titre de l'événement -->
    <div class="form-row mb-4">
        <div class="col-md-6 mb-3">
            <label for="titre">Titre de l'événement</label>
            <input 
                type="text" 
                class="form-control" 
                id="titre" 
                name="titre" 
                placeholder="Titre de l'événement" 
                value="<%= event ? event.titre : '' %>" 
                required
            >
            <div class="valid-feedback">Looks good!</div>
            <div class="invalid-feedback">Please provide a title.</div>
        </div>
        <div class="col-md-6 mb-3">
            <label for="image_url">Image de l'événement</label>
            <input 
                type="file" 
                class="form-control-file" 
                id="image_url" 
                name="image_url" 
                <%= event ? '' : 'required' %> 
            >
            <div class="invalid-feedback">Please upload an image.</div>
        </div>
    </div>
    <% if (event && event.image_url) { %>
        <input type="hidden" name="existing_image_url" value="<%= event.image_url %>">
      <% } %>
    <!-- Aperçu et Description -->
    <div class="form-group mb-4">
        <label for="apercu">Aperçu</label>
        <textarea 
            class="form-control" 
            id="apercu" 
            name="apercu" 
            rows="2" 
            placeholder="Aperçu de l'événement" 
            required
        ><%= event ? event.apercu : '' %></textarea>
        <div class="invalid-feedback">Please provide an overview.</div>
    </div>
    <div class="form-group mb-4">
        <label for="description">Description</label>
        <textarea 
            class="form-control" 
            id="description" 
            name="description" 
            rows="3" 
            placeholder="Description de l'événement" 
            required
        ><%= event ? event.description : '' %></textarea>
        <div class="invalid-feedback">Please provide a description.</div>
    </div>

    <!-- Dates et Lieu -->
    <div class="form-row mb-4">
        <div class="col-md-4 mb-3">
            <label for="date_debut">Date de début</label>
            <input 
                type="date" 
                class="form-control" 
                id="date_debut" 
                name="date_debut" 
                value="<%= event ? event.date_debut.toISOString().split('T')[0] : '' %>" 
                required
            >
            <div class="invalid-feedback">Please provide a start date.</div>
        </div>
        <div class="col-md-4 mb-3">
            <label for="time">L'heure</label>
            <input 
                type="time" 
                class="form-control" 
                id="time" 
                name="time" 
                value="<%= event ? event.time : '' %>" 
                required
            >
            <div class="invalid-feedback">Please provide a time.</div>
        </div>
        <div class="col-md-4 mb-3">
            <label for="date_fin">Date de fin</label>
            <input 
                type="date" 
                class="form-control" 
                id="date_fin" 
                name="date_fin" 
                value="<%= event ? event.date_fin ? event.date_fin.toISOString().split('T')[0] : '' : '' %>" 
            >
            <div class="invalid-feedback">Please provide an end date.</div>
        </div>
    </div>

    <div class="form-row mb-4">
        <div class="col-md-4 mb-3">
            <label for="lieu">Lieu</label>
            <input 
                type="text" 
                class="form-control" 
                id="lieu" 
                name="lieu" 
                placeholder="Lieu de l'événement" 
                value="<%= event ? event.lieu : '' %>" 
                required
            >
            <div class="invalid-feedback">Please provide a location.</div>
        </div>
        <div class="col-md-4 mb-3">
            <label for="observations">Observations</label>
            <textarea 
                class="form-control" 
                id="observations" 
                name="observations" 
                rows="1" 
                placeholder="Observations"
            ><%= event ? event.observations : '' %></textarea>
            <div class="invalid-feedback">Please provide observations.</div>
        </div>
        <div class="col-md-4 mb-3">
            <label for="participation">Participation</label>
            <input 
                type="text" 
                class="form-control" 
                id="participation" 
                name="participation" 
                placeholder="Participation" 
                value="<%= event ? event.participation : '' %>"
            >
            <div class="invalid-feedback">Please provide participation details.</div>
        </div>
    </div>

    <div class="form-group mb-4">
        <label for="info_add">Informations supplémentaires</label>
        <textarea 
            class="form-control" 
            id="info_add" 
            name="info_add" 
            rows="2" 
            placeholder="Informations supplémentaires"
        ><%= event ? event.info_add : '' %></textarea>
        <div class="invalid-feedback">Please provide additional information.</div>
    </div>

    <div>
        <button class="btn btn-primary mt-4" type="submit">
            <%= event ? 'Modifier Un Événement' : 'Créer Un Événement' %>
        </button>
    </div>
</form>
